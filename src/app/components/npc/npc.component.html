<div class="npc" fxLayout="column" *ngIf="loaded">
  <!-- Floating Buttons -->
  <div class="drag-handle">
    <fa-icon [icon]="moveIcon"></fa-icon>
  </div>
  <div class="delete-button" (click)="close()">
    <fa-icon [icon]="closeIcon"></fa-icon>
  </div>
  
  <!-- Header -->
  <mat-form-field class="npc-name" fxLayout="column">
    <input matInput type="text" [(ngModel)]="npc.name" autocomplete="false"/>
    <mat-hint class="hint-table">
      <span>{{npc.getTemplateName()}} {{(npc.getProperty(attributeEnum.SIZE) | async)!.display}}</span>
      <span>Speed: {{npc.getProperty(attributeEnum.SPEED) | async}}m</span>
    </mat-hint>
  </mat-form-field>
  <div class="gap"></div>
  
  <!-- Attributes -->
  <app-attribute-bar [npc]="npc" [attribute]="attributeEnum.HP" [color]="colorEnum.RED"
    (onChange)="onHpChange($event)"
  ></app-attribute-bar>
  <app-attribute-bar [npc]="npc" [attribute]="attributeEnum.SP" [color]="colorEnum.GREEN"
    (onChange)="onSpChange($event)"
    [disabled]="npc.getProperty(combatEnum.STAMINA_SPENT) | async"
  ></app-attribute-bar>
  <app-attribute-bar [npc]="npc" [attribute]="attributeEnum.MP" [color]="colorEnum.BLUE"></app-attribute-bar>
  
  <!-- Skill roller -->
  <app-skill-roller [npc]="npc"></app-skill-roller>
  
  <!-- Notes -->
  <div class="gap"></div>
  <app-property-input [property]="npcProperties.NOTES" [directCharacterAccess]="npc" [allowBlank]="true"></app-property-input>
</div>
<app-pixel-rounder></app-pixel-rounder>